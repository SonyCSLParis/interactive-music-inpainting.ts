@use './mixins/measures';
@use './mixins/colors';

// $main-panel-height: calc()
$spectrogram-background-color: #744a86;
$spectrogram-height: 45vh;

#spectrogram-container {
    height: 100%; // 45vh !important;
    width: 100%; // 90vw !important;
    // margin-top: 8vh;
    margin-left: 0vw; // 5vw;

    top: 0;
    bottom: 0;
    position: absolute;
    z-index: -1;

    &.busy {
        cursor: wait !important;
        & * {
            pointer-events: none !important;
        }
    }

    background: transparent;
    [nexus-ui] {
        position: absolute;
        left: 0;
    }

    &.no-scroll .simplebar-track.simplebar-horizontal {
        display: none;
        visibility: hidden;
    }
}

#spectrogram-image-container {
    position: absolute;
    height: 90%;
    width: 100vw;
    top: 10%;
    pointer-events: none;

    .simplebar-scroll-content {
        pointer-events: none;
    }

    .simplebar-track.simplebar-horizontal {
        background-color: darken(colors.$body-background, 15%);
        box-shadow: 0 0 20px 0.5px rgba($spectrogram-background-color, 0.2) inset;
        .simplebar-scrollbar {
            &:hover {
                background-color: lighten(colors.$panes-background, 8%);
            }
            box-shadow: 0 0 2px 1px lighten(colors.$panes-background, 6%);;
            // box-shadow: 0 0 3px 0.5px transparency(darken(colors.$panes-background, 20%), 60%);
            background-color: lighten(colors.$panes-background, 6%);
        }
        position: absolute;
        overflow: visible;
    }

    .simplebar-content-wrapper {
        scroll-snap-type: x mandatory;

        snap {
            scroll-snap-align: start;
            display: inline-flex;
            flex: 1;
            visibility: hidden;
        }
    }

}

#spectrogram-picture {
    position: relative;
    left: 5vw;
    height: $spectrogram-height !important;

    img {
        background-color: $spectrogram-background-color;
        margin-right: 5vw;
        height: $spectrogram-height;
        top: 0;
    }

    > * {
        top: 0;
        position: relative;
        pointer-events: none;
        z-index: -1000;
    }
}

#snap-points {
    margin-left: -5vw;
    display: flex;
    height: 1px;
    visibility: hidden;
}

#spectrogram-container-shadow-container {
    position: absolute;
    top: 0;
    width: 100%;
    height: 100%;
    box-shadow: 0 0 20px 3px $spectrogram-background-color;
    z-index: 10;
    pointer-events: none;
}

#spectrogram-container-interface-container {
    position: absolute;
    margin-left: 5vw;
    width: measures.$spectrogram-width !important;
    top: 10%;
    height: $spectrogram-height;
    z-index: 0;
    // background: $spectrogram-background-color;

    &:before, &:after {
        z-index: 0;
        position: absolute;
        width: 5vw;
        top: 0;
        height: $spectrogram-height;
        will-change: width;
        backdrop-filter: brightness(1.3) blur(2px);
        transform: perspective(500px);
    }
    &:before {
        left: -5vw;
        content:
            radial-gradient(ellipse farthest-corner at right,
                transparent 0,
                rgba(colors.$body-background, 1) 70%,
            );
    }

    &:after {
        right: -5vw;content:
        radial-gradient(ellipse farthest-corner at left,
            transparent 0,
            rgba(colors.$body-background, 1) 70%,
        );
    }
    div {
        z-index: 100;
        opacity: 0.3;
    }
}
